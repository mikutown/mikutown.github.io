{"title":"macOs汇编入门(HelloWorld)","slug":"macOs汇编入门-HelloWorld","date":"2021-05-13T08:11:30.000Z","updated":"2021-05-14T06:51:30.378Z","comments":true,"path":"api/articles/macOs汇编入门-HelloWorld.json","excerpt":"汇编入门本文介绍在macOs下如何安装nasm以及在nasm下进行HelloWorld的编写","covers":["https://gitee.com/mikutown/pic/raw/master/img/image-20210513162324711.png","https://gitee.com/mikutown/pic/raw/master/img/image-20210513161913214.png","https://gitee.com/mikutown/pic/raw/master/img/image-20210513162015318.png","https://gitee.com/mikutown/pic/raw/master/img/image-20210513162136973.png","https://gitee.com/mikutown/pic/raw/master/img/image-20210513162213348.png"],"content":"<h1 id=\"汇编入门\"><a href=\"#汇编入门\" class=\"headerlink\" title=\"汇编入门\"></a>汇编入门</h1><p>本文介绍在macOs下如何安装nasm以及在nasm下进行HelloWorld的编写</p>\n<a id=\"more\"></a>\n<hr>\n<h2 id=\"安装nasm\"><a href=\"#安装nasm\" class=\"headerlink\" title=\"安装nasm\"></a>安装nasm</h2><p>在终端中输入<code>brew install nasm</code>即可。默认的nasm版本太低无法写64位程序 呜呜！</p>\n<ul>\n<li>注：安装完成后输入命令nasm -v查看是否可以显示版本！可以显示版本就说明安装好了哦!</li>\n</ul>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513162324711.png\" alt=\"image-20210513162324711\" loading=\"lazy\"></p>\n<hr>\n<h2 id=\"nasm的helloworld的编写\"><a href=\"#nasm的helloworld的编写\" class=\"headerlink\" title=\"nasm的helloworld的编写\"></a>nasm的helloworld的编写</h2><ol>\n<li>编写以下代码(文件命名为helloworld.asm):</li>\n</ol>\n<pre class=\"language-nasm\" data-language=\"nasm\"><code class=\"language-nasm\"><span class=\"token keyword\">SECTION .data</span>\n   \n<span class=\"token label function\">msg:</span> db <span class=\"token string\">\"hello world!\"</span>, <span class=\"token number\">0x0a</span>\n<span class=\"token label function\">len:</span> equ <span class=\"token operator\">$</span><span class=\"token operator\">-</span>msg\n  \n<span class=\"token keyword\">SECTION .text</span>\n<span class=\"token keyword\">global _main</span>\n  \n<span class=\"token label function\">kernel:</span>\n     syscall\n     ret\n \n<span class=\"token label function\">_main:</span>\n     mov <span class=\"token register variable\">rax</span>,<span class=\"token number\">0x2000004</span>\n     mov <span class=\"token register variable\">rdi</span>,<span class=\"token number\">1</span>\n     mov <span class=\"token register variable\">rsi</span>,msg\n     mov <span class=\"token register variable\">rdx</span>,len\n     call kernel\n  \n     mov <span class=\"token register variable\">rax</span>,<span class=\"token number\">0x2000001</span>\n     mov <span class=\"token register variable\">rdi</span>,<span class=\"token number\">0</span>\n     call kernel\n</code></pre>\n<ol start=\"2\">\n<li>保存后退出，进入iterm中该文件所在的目录，按ls确认当前文件是否在目录中</li>\n</ol>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513161913214.png\" alt=\"image-20210513161913214\" loading=\"lazy\"></p>\n<ol start=\"3\">\n<li><p>输入以下命令生成helloworld.o文件：<code>nasm -f macho64 -o helloworld.o helloworld.asm</code></p>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513162015318.png\" alt=\"image-20210513162015318\" loading=\"lazy\"></p>\n</li>\n<li><p>输入以下命令生成helloworld可执行文件:<code>ld -o helloworld -e _main helloworld.o -lSystem</code></p>\n</li>\n</ol>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513162136973.png\" alt=\"image-20210513162136973\" loading=\"lazy\"></p>\n<ol start=\"5\">\n<li>输入命令<code>./helloworld</code>运行可执行文件</li>\n</ol>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513162213348.png\" alt=\"image-20210513162213348\" loading=\"lazy\"></p>\n<hr>\n<p>参考链接：<a href=\"https://blog.csdn.net/u011987514/article/details/72615406\">https://blog.csdn.net/u011987514/article/details/72615406</a></p>\n","more":"<hr>\n<h2 id=\"安装nasm\"><a href=\"#安装nasm\" class=\"headerlink\" title=\"安装nasm\"></a>安装nasm</h2><p>在终端中输入<code>brew install nasm</code>即可。默认的nasm版本太低无法写64位程序 呜呜！</p>\n<ul>\n<li>注：安装完成后输入命令nasm -v查看是否可以显示版本！可以显示版本就说明安装好了哦!</li>\n</ul>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513162324711.png\" alt=\"image-20210513162324711\"></p>\n<hr>\n<h2 id=\"nasm的helloworld的编写\"><a href=\"#nasm的helloworld的编写\" class=\"headerlink\" title=\"nasm的helloworld的编写\"></a>nasm的helloworld的编写</h2><ol>\n<li>编写以下代码(文件命名为helloworld.asm):</li>\n</ol>\n<pre class=\"language-nasm\" data-language=\"nasm\"><code class=\"language-nasm\"><span class=\"token keyword\">SECTION .data</span>\n   \n<span class=\"token label function\">msg:</span> db <span class=\"token string\">\"hello world!\"</span>, <span class=\"token number\">0x0a</span>\n<span class=\"token label function\">len:</span> equ <span class=\"token operator\">$</span><span class=\"token operator\">-</span>msg\n  \n<span class=\"token keyword\">SECTION .text</span>\n<span class=\"token keyword\">global _main</span>\n  \n<span class=\"token label function\">kernel:</span>\n     syscall\n     ret\n \n<span class=\"token label function\">_main:</span>\n     mov <span class=\"token register variable\">rax</span>,<span class=\"token number\">0x2000004</span>\n     mov <span class=\"token register variable\">rdi</span>,<span class=\"token number\">1</span>\n     mov <span class=\"token register variable\">rsi</span>,msg\n     mov <span class=\"token register variable\">rdx</span>,len\n     call kernel\n  \n     mov <span class=\"token register variable\">rax</span>,<span class=\"token number\">0x2000001</span>\n     mov <span class=\"token register variable\">rdi</span>,<span class=\"token number\">0</span>\n     call kernel\n</code></pre>\n<ol start=\"2\">\n<li>保存后退出，进入iterm中该文件所在的目录，按ls确认当前文件是否在目录中</li>\n</ol>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513161913214.png\" alt=\"image-20210513161913214\"></p>\n<ol start=\"3\">\n<li><p>输入以下命令生成helloworld.o文件：<code>nasm -f macho64 -o helloworld.o helloworld.asm</code></p>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513162015318.png\" alt=\"image-20210513162015318\"></p>\n</li>\n<li><p>输入以下命令生成helloworld可执行文件:<code>ld -o helloworld -e _main helloworld.o -lSystem</code></p>\n</li>\n</ol>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513162136973.png\" alt=\"image-20210513162136973\"></p>\n<ol start=\"5\">\n<li>输入命令<code>./helloworld</code>运行可执行文件</li>\n</ol>\n<p><img src=\"https://gitee.com/mikutown/pic/raw/master/img/image-20210513162213348.png\" alt=\"image-20210513162213348\"></p>\n<hr>\n<p>参考链接：<a href=\"https://blog.csdn.net/u011987514/article/details/72615406\">https://blog.csdn.net/u011987514/article/details/72615406</a></p>","categories":[],"tags":[{"name":"nasm","path":"api/tags/nasm.json"}]}