{"title":"算法练习-28-计算任意一天的星期数-(1.2.12)","slug":"算法练习-28-计算任意一天的星期数-(1.2.12)","date":"2021-02-03T10:41:28.000Z","updated":"2021-02-03T18:21:14.541Z","comments":true,"path":"api/articles/算法练习-28-计算任意一天的星期数-(1.2.12).json","excerpt":"算法练习-28-计算任意一天的星期数-(1.2.12)知识点蔡勒公式基姆拉尔森计算公式","covers":null,"content":"<h1 id=\"算法练习-28-计算任意一天的星期数-1-2-12\"><a href=\"#算法练习-28-计算任意一天的星期数-1-2-12\" class=\"headerlink\" title=\"算法练习-28-计算任意一天的星期数-(1.2.12)\"></a>算法练习-28-计算任意一天的星期数-(1.2.12)</h1><ul>\n<li>知识点<ul>\n<li>蔡勒公式</li>\n<li>基姆拉尔森计算公式</li>\n</ul>\n</li>\n</ul>\n<a id=\"more\"></a>\n\n<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><p><strong>1.2.12 为SmartDate添加一个方法dayOfTheWeek()，为日期中每周的日返回Monday、Tuesday、Wednesday、Thursday……假定是21世纪</strong></p>\n<hr>\n<p><strong>1.2.12 Add a method dayOfTheWeek() to SmartDate that returns a String value Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, or Sunday, giving the appropriate day of the week for the date. You may assume that the date is in the 21st century.</strong></p>\n<pre class=\"language-none\"><code class=\"language-none\">蔡勒公式\n蔡勒（Zeller）公式，是一个计算星期的公式，随便给一个日期，就能用这个公式推算出是星期几。由德国数学家 克里斯提安·蔡勒 推算出來。\n适用范围\n蔡勒公式只适合于1582年（中国明朝万历十年）10月15日之后的情形。罗马教皇格里高利十三世在1582年组织了一批天文学家，根据哥白尼日心说计算出来的数据，对儒略历作了修改。将1582年10月5日到14日之间的10天宣布撤销，即10月4日之后为10月15日。\n后来人们将这一新的历法称为“格里高利历”，也就是今天世界上所通用的历法，简称格里历或公历。</code></pre>\n<p>$$<br>w = (y + [\\frac{y}{4}] + [\\frac{c}{4}] - 2c + [\\frac{26(m+1)}{10}] + d - 1)mod7<br>$$</p>\n<pre class=\"language-none\"><code class=\"language-none\">w：星期； w对7取模得：0-星期日，1-星期一，2-星期二，3-星期三，4-星期四，5-星期五，6-星期六\nc：世纪（注：在公式中取值为已经过的世纪数，也就是年份除以一百的结果，而非正在进行的世纪，也就是现在常用的年份除以一百加一）\ny：年（后两位数）\nm：月（m大于等于3，小于等于14，即在蔡勒公式中，某年的1、2月要看作上一年的13、14月来计算，比如2003年1月1日要看作2002年的13月1日来计算）\nd：日\n[ ]代表取整，即只要整数部分。</code></pre>\n<pre class=\"language-none\"><code class=\"language-none\">蔡勒公式推导过程\n详见蔡勒公式的推导过程，这里笔者做个大概原理：\n在日常生活中，我们常常遇到要知道某一天是星期几的问题。有时候，我们还想知\n道历史上某一天是星期几。通常，解决这个方法的有效办法是看日历，但是我们总不会\n随时随身带着日历，更不可能随时随身带着几千年的万年历。假如是想在计算机编程中\n计算某一天是星期几，预先把一本万年历存进去就更不现实了。这时候是不是有办法通\n过什么公式，从年月日推出这一天是星期几呢？\n答案是肯定的。其实我们也常常在这样做。我们先举一个简单的例子。比如，知道\n了2004年5月1日是星期六，那么2004年5月31日“世界无烟日”是星期几就不难推算出\n来。我们可以掰着指头从1日数到31日，同时数星期，最后可以数出5月31日是星期一。\n其实运用数学计算，可以不用掰指头。我们知道星期是七天一轮回的，所以5月1日是星\n期六，七天之后的5月8日也是星期六。在日期上，8-1&#x3D;7，正是7的倍数。同样，5月15\n日、5月22日和5月29日也是星期六，它们的日期和5月1日的差值分别是14、21和28，也\n都是7的倍数。那么5月31日呢？31-1&#x3D;30，虽然不是7的倍数，但是31除以7，余数为2，\n这就是说，5月31日的星期，是在5月1日的星期之后两天。星期六之后两天正是星期一。\n这个简单的计算告诉我们计算星期的一个基本思路：首先，先要知道在想算的日子 之前的一个确定的日子是星期几，拿这一天做为推算的标准，也就是相当于一个计算的 “原点”。其次，知道想算的日子和这个确定的日子之间相差多少天，用7除这个日期 的差值，余数就表示想算的日子的星期在确定的日子的星期之后多少天。如果余数是 0，就表示这两天的星期相同。显然，如果把这个作为“原点”的日子选为星期日，那 么余数正好就等于星期几，这样计算就更方便了。\n但是直接计算两天之间的天数，还是不免繁琐。比如1982年7月29日和2004年5月\n1日之间相隔7947天，就不是一下子能算出来的。它包括三段时间：一，1982年7月29\n日以后这一年的剩余天数；二，1983-2003这二十一个整年的全部天数；三，从2004年\n元旦到5月1日经过的天数。第二段比较好算，它等于21*365+5&#x3D;7670天，之所以要加\n5，是因为这段时间内有5个闰年。第一段和第三段就比较麻烦了，比如第三段，需要把\n5月之前的四个月的天数累加起来，再加上日期值，即31+29+31+30+1&#x3D;122天。同理，第\n一段需要把7月之后的五个月的天数累加起来，再加上7月剩下的天数，一共是155天。\n所以总共的相隔天数是122+7670+155&#x3D;7947天。\n仔细想想，如果把“原点”日子的日期选为12月31日，那么第一段时间也就是一个\n整年，这样一来，第一段时间和第二段时间就可以合并计算，整年的总数正好相当于两\n个日子的年份差值减一。如果进一步把“原点”日子选为公元前1年12月31日（或者天文\n学家所使用的公元0年12月31日），这个整年的总数就正好是想算的日子的年份减一。这\n样简化之后，就只须计算两段时间：一，这么多整年的总天数；二，想算的日子是这一\n年的第几天。巧的是，按照公历的年月设置，这样反推回去，公元前1年12月31日正好是\n星期日，也就是说，这样算出来的总天数除以7的余数正好是星期几。那么现在的问题就\n只有一个：这么多整年里面有多少闰年。这就需要了解公历的置闰规则了。\n我们知道，公历的平年是365天，闰年是366天。置闰的方法是能被4整除的年份在\n2月加一天，但能被100整除的不闰，能被400整除的又闰。因此，像1600、2000、2400 年都是闰年，而1700、1800、1900、2100年都是平年。公元前1年，按公历也是闰年。\n因此，对于从公元前1年（或公元0年）12月31日到某一日子的年份Y之间的所有整年\n中的闰年数，就等于 [(Y-1)&#x2F;4] - [(Y-1)&#x2F;100] + [(Y-1)&#x2F;400]。</code></pre>\n<ul>\n<li>答案</li>\n</ul>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SmartDate2</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> myYear<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> myMonth<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> myDay<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SmartDate2</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> month<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> day<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> year<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>       <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"year is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>month<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> month<span class=\"token operator\">></span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span>    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"month is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>day<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> day<span class=\"token operator\">></span><span class=\"token number\">31</span><span class=\"token punctuation\">)</span>    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"day is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>month<span class=\"token operator\">%</span><span class=\"token number\">2</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> day<span class=\"token operator\">></span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"day is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">%</span><span class=\"token number\">400</span><span class=\"token operator\">!=</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">%</span><span class=\"token number\">4</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> year<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token operator\">!=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> month<span class=\"token operator\">==</span><span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> day<span class=\"token operator\">></span><span class=\"token number\">28</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"day is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">%</span><span class=\"token number\">400</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>year<span class=\"token operator\">%</span><span class=\"token number\">4</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> year<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token operator\">!=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> month<span class=\"token operator\">==</span><span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> day<span class=\"token operator\">></span><span class=\"token number\">29</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"day is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//</span>\n        myYear<span class=\"token operator\">=</span>year<span class=\"token punctuation\">;</span>\n        myMonth<span class=\"token operator\">=</span>month<span class=\"token punctuation\">;</span>\n        myDay<span class=\"token operator\">=</span>day<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">month</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> myMonth<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">day</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> myDay<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> myYear<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">dayOfTheWeek</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> w<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>myYear<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>myYear<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">4</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>myYear<span class=\"token operator\">-</span>myYear<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">4</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>myYear<span class=\"token operator\">-</span>myYear<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">26</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>myMonth<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">10</span><span class=\"token operator\">+</span>myDay<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>w<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> w<span class=\"token operator\">=</span>w<span class=\"token operator\">+</span><span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">0</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Sunday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Monday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">2</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Tuesday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">3</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Wednesday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">4</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Thursday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">5</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Friday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">6</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Saturday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> weekstr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">month</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">+</span><span class=\"token function\">day</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">+</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">SmartDate2</span> d<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SmartDate2</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2016</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">StdOut</span><span class=\"token punctuation\">.</span><span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Date is:%s,WeekDay is:%s\"</span><span class=\"token punctuation\">,</span>d<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>d<span class=\"token punctuation\">.</span><span class=\"token function\">dayOfTheWeek</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p>源码参考：<a href=\"https://www.cnblogs.com/longjin2018/p/9848894.html\">https://www.cnblogs.com/longjin2018/p/9848894.html</a></p>\n","more":"<h2 id=\"题目\"><a href=\"#题目\" class=\"headerlink\" title=\"题目\"></a>题目</h2><p><strong>1.2.12 为SmartDate添加一个方法dayOfTheWeek()，为日期中每周的日返回Monday、Tuesday、Wednesday、Thursday……假定是21世纪</strong></p>\n<hr>\n<p><strong>1.2.12 Add a method dayOfTheWeek() to SmartDate that returns a String value Monday, Tuesday, Wednesday, Thursday, Friday, Saturday, or Sunday, giving the appropriate day of the week for the date. You may assume that the date is in the 21st century.</strong></p>\n<pre class=\"language-none\"><code class=\"language-none\">蔡勒公式\n蔡勒（Zeller）公式，是一个计算星期的公式，随便给一个日期，就能用这个公式推算出是星期几。由德国数学家 克里斯提安·蔡勒 推算出來。\n适用范围\n蔡勒公式只适合于1582年（中国明朝万历十年）10月15日之后的情形。罗马教皇格里高利十三世在1582年组织了一批天文学家，根据哥白尼日心说计算出来的数据，对儒略历作了修改。将1582年10月5日到14日之间的10天宣布撤销，即10月4日之后为10月15日。\n后来人们将这一新的历法称为“格里高利历”，也就是今天世界上所通用的历法，简称格里历或公历。</code></pre>\n<p>$$<br>w = (y + [\\frac{y}{4}] + [\\frac{c}{4}] - 2c + [\\frac{26(m+1)}{10}] + d - 1)mod7<br>$$</p>\n<pre class=\"language-none\"><code class=\"language-none\">w：星期； w对7取模得：0-星期日，1-星期一，2-星期二，3-星期三，4-星期四，5-星期五，6-星期六\nc：世纪（注：在公式中取值为已经过的世纪数，也就是年份除以一百的结果，而非正在进行的世纪，也就是现在常用的年份除以一百加一）\ny：年（后两位数）\nm：月（m大于等于3，小于等于14，即在蔡勒公式中，某年的1、2月要看作上一年的13、14月来计算，比如2003年1月1日要看作2002年的13月1日来计算）\nd：日\n[ ]代表取整，即只要整数部分。</code></pre>\n<pre class=\"language-none\"><code class=\"language-none\">蔡勒公式推导过程\n详见蔡勒公式的推导过程，这里笔者做个大概原理：\n在日常生活中，我们常常遇到要知道某一天是星期几的问题。有时候，我们还想知\n道历史上某一天是星期几。通常，解决这个方法的有效办法是看日历，但是我们总不会\n随时随身带着日历，更不可能随时随身带着几千年的万年历。假如是想在计算机编程中\n计算某一天是星期几，预先把一本万年历存进去就更不现实了。这时候是不是有办法通\n过什么公式，从年月日推出这一天是星期几呢？\n答案是肯定的。其实我们也常常在这样做。我们先举一个简单的例子。比如，知道\n了2004年5月1日是星期六，那么2004年5月31日“世界无烟日”是星期几就不难推算出\n来。我们可以掰着指头从1日数到31日，同时数星期，最后可以数出5月31日是星期一。\n其实运用数学计算，可以不用掰指头。我们知道星期是七天一轮回的，所以5月1日是星\n期六，七天之后的5月8日也是星期六。在日期上，8-1&#x3D;7，正是7的倍数。同样，5月15\n日、5月22日和5月29日也是星期六，它们的日期和5月1日的差值分别是14、21和28，也\n都是7的倍数。那么5月31日呢？31-1&#x3D;30，虽然不是7的倍数，但是31除以7，余数为2，\n这就是说，5月31日的星期，是在5月1日的星期之后两天。星期六之后两天正是星期一。\n这个简单的计算告诉我们计算星期的一个基本思路：首先，先要知道在想算的日子 之前的一个确定的日子是星期几，拿这一天做为推算的标准，也就是相当于一个计算的 “原点”。其次，知道想算的日子和这个确定的日子之间相差多少天，用7除这个日期 的差值，余数就表示想算的日子的星期在确定的日子的星期之后多少天。如果余数是 0，就表示这两天的星期相同。显然，如果把这个作为“原点”的日子选为星期日，那 么余数正好就等于星期几，这样计算就更方便了。\n但是直接计算两天之间的天数，还是不免繁琐。比如1982年7月29日和2004年5月\n1日之间相隔7947天，就不是一下子能算出来的。它包括三段时间：一，1982年7月29\n日以后这一年的剩余天数；二，1983-2003这二十一个整年的全部天数；三，从2004年\n元旦到5月1日经过的天数。第二段比较好算，它等于21*365+5&#x3D;7670天，之所以要加\n5，是因为这段时间内有5个闰年。第一段和第三段就比较麻烦了，比如第三段，需要把\n5月之前的四个月的天数累加起来，再加上日期值，即31+29+31+30+1&#x3D;122天。同理，第\n一段需要把7月之后的五个月的天数累加起来，再加上7月剩下的天数，一共是155天。\n所以总共的相隔天数是122+7670+155&#x3D;7947天。\n仔细想想，如果把“原点”日子的日期选为12月31日，那么第一段时间也就是一个\n整年，这样一来，第一段时间和第二段时间就可以合并计算，整年的总数正好相当于两\n个日子的年份差值减一。如果进一步把“原点”日子选为公元前1年12月31日（或者天文\n学家所使用的公元0年12月31日），这个整年的总数就正好是想算的日子的年份减一。这\n样简化之后，就只须计算两段时间：一，这么多整年的总天数；二，想算的日子是这一\n年的第几天。巧的是，按照公历的年月设置，这样反推回去，公元前1年12月31日正好是\n星期日，也就是说，这样算出来的总天数除以7的余数正好是星期几。那么现在的问题就\n只有一个：这么多整年里面有多少闰年。这就需要了解公历的置闰规则了。\n我们知道，公历的平年是365天，闰年是366天。置闰的方法是能被4整除的年份在\n2月加一天，但能被100整除的不闰，能被400整除的又闰。因此，像1600、2000、2400 年都是闰年，而1700、1800、1900、2100年都是平年。公元前1年，按公历也是闰年。\n因此，对于从公元前1年（或公元0年）12月31日到某一日子的年份Y之间的所有整年\n中的闰年数，就等于 [(Y-1)&#x2F;4] - [(Y-1)&#x2F;100] + [(Y-1)&#x2F;400]。</code></pre>\n<ul>\n<li>答案</li>\n</ul>\n<pre class=\"language-java\" data-language=\"java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SmartDate2</span>\n<span class=\"token punctuation\">&#123;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> myYear<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> myMonth<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token keyword\">int</span> myDay<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SmartDate2</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> month<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> day<span class=\"token punctuation\">,</span><span class=\"token keyword\">int</span> year<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>       <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"year is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>month<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> month<span class=\"token operator\">></span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span>    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"month is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>day<span class=\"token operator\">&lt;</span><span class=\"token number\">1</span> <span class=\"token operator\">||</span> day<span class=\"token operator\">></span><span class=\"token number\">31</span><span class=\"token punctuation\">)</span>    <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"day is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>month<span class=\"token operator\">%</span><span class=\"token number\">2</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> day<span class=\"token operator\">></span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>  <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"day is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">%</span><span class=\"token number\">400</span><span class=\"token operator\">!=</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">%</span><span class=\"token number\">4</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> year<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token operator\">!=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> month<span class=\"token operator\">==</span><span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> day<span class=\"token operator\">></span><span class=\"token number\">28</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"day is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>year<span class=\"token operator\">%</span><span class=\"token number\">400</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">||</span> <span class=\"token punctuation\">(</span>year<span class=\"token operator\">%</span><span class=\"token number\">4</span><span class=\"token operator\">==</span><span class=\"token number\">0</span> <span class=\"token operator\">&amp;&amp;</span> year<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token operator\">!=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> month<span class=\"token operator\">==</span><span class=\"token number\">2</span> <span class=\"token operator\">&amp;&amp;</span> day<span class=\"token operator\">></span><span class=\"token number\">29</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">IllegalArgumentException</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"day is error.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">//</span>\n        myYear<span class=\"token operator\">=</span>year<span class=\"token punctuation\">;</span>\n        myMonth<span class=\"token operator\">=</span>month<span class=\"token punctuation\">;</span>\n        myDay<span class=\"token operator\">=</span>day<span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">//</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">month</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> myMonth<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">day</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> myDay<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">int</span> <span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> myYear<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">dayOfTheWeek</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">int</span> w<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>myYear<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>myYear<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">4</span><span class=\"token operator\">+</span><span class=\"token punctuation\">(</span>myYear<span class=\"token operator\">-</span>myYear<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">4</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>myYear<span class=\"token operator\">-</span>myYear<span class=\"token operator\">%</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token number\">26</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>myMonth<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token number\">10</span><span class=\"token operator\">+</span>myDay<span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>w<span class=\"token operator\">&lt;</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> w<span class=\"token operator\">=</span>w<span class=\"token operator\">+</span><span class=\"token number\">7</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">String</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">switch</span><span class=\"token punctuation\">(</span>w<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">&#123;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">0</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Sunday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">1</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Monday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">2</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Tuesday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">3</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Wednesday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">4</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Thursday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">5</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Friday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n            <span class=\"token keyword\">case</span> <span class=\"token number\">6</span><span class=\"token operator\">:</span> weekstr<span class=\"token operator\">=</span><span class=\"token string\">\"Saturday\"</span><span class=\"token punctuation\">;</span> <span class=\"token keyword\">break</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">&#125;</span>\n        <span class=\"token keyword\">return</span> weekstr<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">String</span> <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token keyword\">return</span> <span class=\"token function\">month</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">+</span><span class=\"token function\">day</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">+</span><span class=\"token string\">\"/\"</span><span class=\"token operator\">+</span><span class=\"token function\">year</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">&#123;</span>\n        <span class=\"token class-name\">SmartDate2</span> d<span class=\"token operator\">=</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">SmartDate2</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token number\">18</span><span class=\"token punctuation\">,</span><span class=\"token number\">2016</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">StdOut</span><span class=\"token punctuation\">.</span><span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Date is:%s,WeekDay is:%s\"</span><span class=\"token punctuation\">,</span>d<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>d<span class=\"token punctuation\">.</span><span class=\"token function\">dayOfTheWeek</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">&#125;</span>\n<span class=\"token punctuation\">&#125;</span></code></pre>\n<hr>\n<p>源码参考：<a href=\"https://www.cnblogs.com/longjin2018/p/9848894.html\">https://www.cnblogs.com/longjin2018/p/9848894.html</a></p>","categories":[],"tags":[{"name":"算法","path":"api/tags/算法.json"}]}