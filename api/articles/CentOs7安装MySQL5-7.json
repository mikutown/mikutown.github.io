{"title":"CentOS7安装MySQL5.7","slug":"CentOs7安装MySQL5-7","date":"2020-04-21T13:57:41.000Z","updated":"2021-01-02T20:00:24.000Z","comments":true,"path":"api/articles/CentOs7安装MySQL5-7.json","excerpt":"CentOs7安装MySQL5.75.7相较于5.6来说，坑很多 因此写教程记录一下，以后用得上1.通过ssh连接服务器2.安装Mysql运行以下命令更新YUM源。","covers":null,"content":"<h1 id=\"CentOs7安装MySQL5-7\"><a href=\"#CentOs7安装MySQL5-7\" class=\"headerlink\" title=\"CentOs7安装MySQL5.7\"></a>CentOs7安装MySQL5.7</h1><p>5.7相较于5.6来说，坑很多 因此写教程记录一下，以后用得上</p>\n<h2 id=\"1-通过ssh连接服务器\"><a href=\"#1-通过ssh连接服务器\" class=\"headerlink\" title=\"1.通过ssh连接服务器\"></a>1.通过ssh连接服务器</h2><h2 id=\"2-安装Mysql\"><a href=\"#2-安装Mysql\" class=\"headerlink\" title=\"2.安装Mysql\"></a>2.安装Mysql</h2><ol>\n<li><p>运行以下命令更新YUM源。</p>\n<a id=\"more\"></a>\n\n</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">rpm -Uvh  http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;mysql57-community-release-el7-9.noarch.rpm</code></pre>\n<ol start=\"2\">\n<li>运行以下命令安装MySQL。(镜像可能会稍微有点久，多等一会)</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">yum -y install mysql-community-server</code></pre>\n<ol start=\"3\">\n<li>运行以下命令查看MySQL版本号。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql -v</code></pre>\n<p>返回结果如下，表示MySQL安装成功。<br><code>mysql  Ver 14.14 Distrib 5.7.28, for Linux (x86_64) using  EditLine wrapper</code></p>\n<h2 id=\"3-配置MySQL\"><a href=\"#3-配置MySQL\" class=\"headerlink\" title=\"3.配置MySQL\"></a>3.配置MySQL</h2><ol>\n<li>运行以下命令启动MySQL服务。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">systemctl start mysqld</code></pre>\n<ol start=\"2\">\n<li>运行以下命令设置MySQL服务开机自启动。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">systemctl enable mysqld</code></pre>\n<ol start=\"3\">\n<li>运行以下命令查看/var/log/mysqld.log文件，获取并记录root用户的初始密码。(下一步重置root用户密码时，会使用该初始密码)</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">grep &#39;temporary password&#39; &#x2F;var&#x2F;log&#x2F;mysqld.log\n2019-11-13T09:22:30.998148Z 1 [Note] A temporary password is generated for root@localhost: c(dwuSJQP0pq</code></pre>\n<ol start=\"4\">\n<li>运行下列命令对MySQL进行安全性配置。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql_secure_installation</code></pre>\n<h2 id=\"4-配置MySQL的安全性\"><a href=\"#4-配置MySQL的安全性\" class=\"headerlink\" title=\"4.配置MySQL的安全性\"></a>4.配置MySQL的安全性</h2><ol>\n<li>重置root用户的密码。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">Enter password for user root: #输入上一步获取的root用户初始密码\nThe &#39;validate_password&#39; plugin is installed on the server.\nThe subsequent steps will run with the existing configuration of the plugin.\nUsing existing password for root.\nEstimated strength of the password: 100 \nChange the password for root ? ((Press y|Y for Yes, any other key for No) : Y #是否更改root用户密码，输入Y\nNew password: #输入新密码，长度为8至30个字符，必须同时包含大小写英文字母、数字和特殊符号。特殊符号可以是()&#96; ~!@#$%^&amp;*-+&#x3D;|&#123;&#125;[]:;‘&lt;&gt;,.?&#x2F;\nRe-enter new password: #再次输入新密码\nEstimated strength of the password: 100 \nDo you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : Y</code></pre>\n<ol start=\"2\">\n<li>输入Y删除匿名用户账号。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">By default, a MySQL installation has an anonymous user, allowing anyone to log into MySQL without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother. You should remove them before moving into a production environment.\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : Y  #是否删除匿名用户，输入Y\nSuccess.</code></pre>\n<ol start=\"3\">\n<li>输入Y禁止root账号远程登录。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">Disallow root login remotely? (Press y|Y for Yes, any other key for No) : Y #禁止root远程登录，输入Y\nSuccess.</code></pre>\n<ol start=\"4\">\n<li>输入Y删除test库以及对test库的访问权限。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">Remove test database and access to it? (Press y|Y for Yes, any other key for No) : Y #是否删除test库和对它的访问权限，输入Y\n- Dropping test database...\nSuccess.</code></pre>\n<ol start=\"5\">\n<li>输入Y重新加载授权表。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y #是否重新加载授权表，输入Y\nSuccess.\nAll done!</code></pre>\n<h2 id=\"5-远程访问MySQL数据库\"><a href=\"#5-远程访问MySQL数据库\" class=\"headerlink\" title=\"5.远程访问MySQL数据库\"></a>5.远程访问MySQL数据库</h2><ol>\n<li>通过以下命令登录mysql</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql -uroot -p</code></pre>\n<ol start=\"2\">\n<li>依次运行以下命令创建远程登录MySQL的账号。示例账号为root、密码为root。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql&gt; grant all on *.* to &#39;root&#39;@&#39;%&#39;IDENTIFIED BY &#39;root&#39;; #使用root替换dms，可设置为允许root账号远程登录。\nmysql&gt; flush privileges;</code></pre>\n<h2 id=\"简单密码修改方式\"><a href=\"#简单密码修改方式\" class=\"headerlink\" title=\"简单密码修改方式\"></a>简单密码修改方式</h2><ol>\n<li>通过以下命令登录mysql</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql -uroot -p</code></pre>\n<ol start=\"2\">\n<li>通过以下命令修改mysql默认的密码安全性</li>\n</ol>\n<pre class=\"language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_policy<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.05</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> \nmysql<span class=\"token operator\">></span> \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_mixed_case_count<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_number_count<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_special_char_count<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_length<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">SHOW</span> VARIABLES <span class=\"token operator\">LIKE</span> <span class=\"token string\">'validate_password%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------------------------------------+-------+</span>\n<span class=\"token operator\">|</span> Variable_name                        <span class=\"token operator\">|</span> <span class=\"token keyword\">Value</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------------------------------------+-------+</span>\n<span class=\"token operator\">|</span> validate_password_dictionary_file    <span class=\"token operator\">|</span>       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_length             <span class=\"token operator\">|</span> <span class=\"token number\">3</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_mixed_case_count   <span class=\"token operator\">|</span> <span class=\"token number\">0</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_number_count       <span class=\"token operator\">|</span> <span class=\"token number\">3</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_policy             <span class=\"token operator\">|</span> LOW   <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_special_char_count <span class=\"token operator\">|</span> <span class=\"token number\">0</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------------------------------------+-------+</span></code></pre>\n<ol start=\"3\">\n<li>修改简单密码：</li>\n</ol>\n<pre class=\"language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> PASSWORD <span class=\"token keyword\">FOR</span> <span class=\"token string\">'root'</span><span class=\"token variable\">@'localhost'</span> <span class=\"token operator\">=</span> PASSWORD<span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> warning <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre>","more":"</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">rpm -Uvh  http:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;mysql57-community-release-el7-9.noarch.rpm</code></pre>\n<ol start=\"2\">\n<li>运行以下命令安装MySQL。(镜像可能会稍微有点久，多等一会)</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">yum -y install mysql-community-server</code></pre>\n<ol start=\"3\">\n<li>运行以下命令查看MySQL版本号。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql -v</code></pre>\n<p>返回结果如下，表示MySQL安装成功。<br><code>mysql  Ver 14.14 Distrib 5.7.28, for Linux (x86_64) using  EditLine wrapper</code></p>\n<h2 id=\"3-配置MySQL\"><a href=\"#3-配置MySQL\" class=\"headerlink\" title=\"3.配置MySQL\"></a>3.配置MySQL</h2><ol>\n<li>运行以下命令启动MySQL服务。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">systemctl start mysqld</code></pre>\n<ol start=\"2\">\n<li>运行以下命令设置MySQL服务开机自启动。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">systemctl enable mysqld</code></pre>\n<ol start=\"3\">\n<li>运行以下命令查看/var/log/mysqld.log文件，获取并记录root用户的初始密码。(下一步重置root用户密码时，会使用该初始密码)</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">grep &#39;temporary password&#39; &#x2F;var&#x2F;log&#x2F;mysqld.log\n2019-11-13T09:22:30.998148Z 1 [Note] A temporary password is generated for root@localhost: c(dwuSJQP0pq</code></pre>\n<ol start=\"4\">\n<li>运行下列命令对MySQL进行安全性配置。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql_secure_installation</code></pre>\n<h2 id=\"4-配置MySQL的安全性\"><a href=\"#4-配置MySQL的安全性\" class=\"headerlink\" title=\"4.配置MySQL的安全性\"></a>4.配置MySQL的安全性</h2><ol>\n<li>重置root用户的密码。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">Enter password for user root: #输入上一步获取的root用户初始密码\nThe &#39;validate_password&#39; plugin is installed on the server.\nThe subsequent steps will run with the existing configuration of the plugin.\nUsing existing password for root.\nEstimated strength of the password: 100 \nChange the password for root ? ((Press y|Y for Yes, any other key for No) : Y #是否更改root用户密码，输入Y\nNew password: #输入新密码，长度为8至30个字符，必须同时包含大小写英文字母、数字和特殊符号。特殊符号可以是()&#96; ~!@#$%^&amp;*-+&#x3D;|&#123;&#125;[]:;‘&lt;&gt;,.?&#x2F;\nRe-enter new password: #再次输入新密码\nEstimated strength of the password: 100 \nDo you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : Y</code></pre>\n<ol start=\"2\">\n<li>输入Y删除匿名用户账号。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">By default, a MySQL installation has an anonymous user, allowing anyone to log into MySQL without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother. You should remove them before moving into a production environment.\nRemove anonymous users? (Press y|Y for Yes, any other key for No) : Y  #是否删除匿名用户，输入Y\nSuccess.</code></pre>\n<ol start=\"3\">\n<li>输入Y禁止root账号远程登录。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">Disallow root login remotely? (Press y|Y for Yes, any other key for No) : Y #禁止root远程登录，输入Y\nSuccess.</code></pre>\n<ol start=\"4\">\n<li>输入Y删除test库以及对test库的访问权限。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">Remove test database and access to it? (Press y|Y for Yes, any other key for No) : Y #是否删除test库和对它的访问权限，输入Y\n- Dropping test database...\nSuccess.</code></pre>\n<ol start=\"5\">\n<li>输入Y重新加载授权表。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y #是否重新加载授权表，输入Y\nSuccess.\nAll done!</code></pre>\n<h2 id=\"5-远程访问MySQL数据库\"><a href=\"#5-远程访问MySQL数据库\" class=\"headerlink\" title=\"5.远程访问MySQL数据库\"></a>5.远程访问MySQL数据库</h2><ol>\n<li>通过以下命令登录mysql</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql -uroot -p</code></pre>\n<ol start=\"2\">\n<li>依次运行以下命令创建远程登录MySQL的账号。示例账号为root、密码为root。</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql&gt; grant all on *.* to &#39;root&#39;@&#39;%&#39;IDENTIFIED BY &#39;root&#39;; #使用root替换dms，可设置为允许root账号远程登录。\nmysql&gt; flush privileges;</code></pre>\n<h2 id=\"简单密码修改方式\"><a href=\"#简单密码修改方式\" class=\"headerlink\" title=\"简单密码修改方式\"></a>简单密码修改方式</h2><ol>\n<li>通过以下命令登录mysql</li>\n</ol>\n<pre class=\"language-none\"><code class=\"language-none\">mysql -uroot -p</code></pre>\n<ol start=\"2\">\n<li>通过以下命令修改mysql默认的密码安全性</li>\n</ol>\n<pre class=\"language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_policy<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.05</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> \nmysql<span class=\"token operator\">></span> \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_mixed_case_count<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_number_count<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_special_char_count<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">set</span> <span class=\"token keyword\">global</span> validate_password_length<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span>\n \nmysql<span class=\"token operator\">></span> <span class=\"token keyword\">SHOW</span> VARIABLES <span class=\"token operator\">LIKE</span> <span class=\"token string\">'validate_password%'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------------------------------------+-------+</span>\n<span class=\"token operator\">|</span> Variable_name                        <span class=\"token operator\">|</span> <span class=\"token keyword\">Value</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------------------------------------+-------+</span>\n<span class=\"token operator\">|</span> validate_password_dictionary_file    <span class=\"token operator\">|</span>       <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_length             <span class=\"token operator\">|</span> <span class=\"token number\">3</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_mixed_case_count   <span class=\"token operator\">|</span> <span class=\"token number\">0</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_number_count       <span class=\"token operator\">|</span> <span class=\"token number\">3</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_policy             <span class=\"token operator\">|</span> LOW   <span class=\"token operator\">|</span>\n<span class=\"token operator\">|</span> validate_password_special_char_count <span class=\"token operator\">|</span> <span class=\"token number\">0</span>     <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">--------------------------------------+-------+</span></code></pre>\n<ol start=\"3\">\n<li>修改简单密码：</li>\n</ol>\n<pre class=\"language-sql\" data-language=\"sql\"><code class=\"language-sql\">mysql<span class=\"token operator\">></span> <span class=\"token keyword\">SET</span> PASSWORD <span class=\"token keyword\">FOR</span> <span class=\"token string\">'root'</span><span class=\"token variable\">@'localhost'</span> <span class=\"token operator\">=</span> PASSWORD<span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nQuery OK<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token keyword\">rows</span> affected<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> warning <span class=\"token punctuation\">(</span><span class=\"token number\">0.00</span> sec<span class=\"token punctuation\">)</span></code></pre>","categories":[],"tags":[{"name":"Linux","path":"api/tags/Linux.json"},{"name":"MySQL","path":"api/tags/MySQL.json"}]}