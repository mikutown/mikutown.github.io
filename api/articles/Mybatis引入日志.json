{"title":"Mybatis引入日志","slug":"Mybatis引入日志","date":"2020-04-21T12:56:53.000Z","updated":"2022-05-20T09:41:56.971Z","comments":true,"path":"api/articles/Mybatis引入日志.json","excerpt":"Mybatis进阶分析引入日志依赖包（pom.xml）会自动引入log4j以及slf4j-api<br>引入日志要记得和自己的mybatis版本相匹配！建议在mvn的网站中寻找最匹配版本，如下图所示：<br> [Figure] ","covers":["http://cdn.leafii.top/img/20220520174034.png","http://cdn.leafii.top/img/20220520174103.png","http://cdn.leafii.top/img/20220520174125.png","http://cdn.leafii.top/img/20220520174147.png"],"content":"<h3 id=\"Mybatis进阶\"><a href=\"#Mybatis进阶\" class=\"headerlink\" title=\"Mybatis进阶\"></a>Mybatis进阶</h3><h4 id=\"分析\"><a href=\"#分析\" class=\"headerlink\" title=\"分析\"></a>分析</h4><h5 id=\"引入日志依赖包（pom-xml）\"><a href=\"#引入日志依赖包（pom-xml）\" class=\"headerlink\" title=\"引入日志依赖包（pom.xml）\"></a>引入日志依赖包（pom.xml）</h5><p>会自动引入log4j以及slf4j-api<br><strong>引入日志要记得和自己的mybatis版本相匹配！建议在mvn的网站中寻找最匹配版本，如下图所示：</strong><br><img src=\"http://cdn.leafii.top/img/20220520174034.png\" loading=\"lazy\"></p>\n<span id=\"more\"></span>\n\n<pre class=\"language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>log4j<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>log4j<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.2.17<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre>\n<h6 id=\"添加log4j-properties在resource下（也就是根目录下）\"><a href=\"#添加log4j-properties在resource下（也就是根目录下）\" class=\"headerlink\" title=\"添加log4j.properties在resource下（也就是根目录下）\"></a>添加log4j.properties在resource下（也就是根目录下）</h6><pre class=\"language-properties\" data-language=\"properties\"><code class=\"language-properties\"><span class=\"token comment\"># Global logging configuration</span>\n<span class=\"token key attr-name\">log4j.rootLogger</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">ERROR, stdout</span>\n<span class=\"token comment\"># MyBatis logging configuration...</span>\n<span class=\"token key attr-name\">log4j.logger.top.leafii.mapper.UserMapper</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">TRACE</span>\n<span class=\"token comment\">#top.leafii.mapper.UserMapper换成自己的Mapper类的相对路径</span>\n<span class=\"token comment\"># Console output...</span>\n<span class=\"token key attr-name\">log4j.appender.stdout</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">org.apache.log4j.ConsoleAppender</span>\n<span class=\"token key attr-name\">log4j.appender.stdout.layout</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">org.apache.log4j.PatternLayout</span>\n<span class=\"token key attr-name\">log4j.appender.stdout.layout.ConversionPattern</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">%5p [%t] - %m%n</span></code></pre>\n<h6 id=\"运行你的test方法，看看打印的日志\"><a href=\"#运行你的test方法，看看打印的日志\" class=\"headerlink\" title=\"运行你的test方法，看看打印的日志\"></a>运行你的test方法，看看打印的日志</h6><p><img src=\"http://cdn.leafii.top/img/20220520174103.png\" loading=\"lazy\"></p>\n<h6 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h6><p>####### 修改TRACE为debug</p>\n<p>很多时候我们只注意操作的sql语句是什么 而不是其他的东西，因此我们将log4j.properties中的</p>\n<pre class=\"language-properties\" data-language=\"properties\"><code class=\"language-properties\"><span class=\"token key attr-name\">log4j.logger.top.leafii.mapper.UserMapper</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">TRACE</span>\n<span class=\"token comment\">#修改为</span>\n<span class=\"token key attr-name\">log4j.logger.top.leafii.mapper.UserMapper</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">debug</span></code></pre>\n\n<p><img src=\"http://cdn.leafii.top/img/20220520174125.png\" loading=\"lazy\"><br>现在看看是不是清爽了很多？</p>\n<h4 id=\"分析-1\"><a href=\"#分析-1\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p> 每次我们写mybatis都要重新写log4j配置文件 岂不是很麻烦</p>\n<h5 id=\"修改pom-xml\"><a href=\"#修改pom-xml\" class=\"headerlink\" title=\"修改pom.xml\"></a>修改pom.xml</h5><pre class=\"language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resource</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>directory</span><span class=\"token punctuation\">></span></span>src/main/java<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>directory</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>includes</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span><span class=\"token punctuation\">></span></span>**/*.*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>includes</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resource</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resource</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>directory</span><span class=\"token punctuation\">></span></span>src/main/resources<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>directory</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>includes</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span><span class=\"token punctuation\">></span></span>**/*.*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>includes</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resource</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></code></pre>\n<h5 id=\"运行结果\"><a href=\"#运行结果\" class=\"headerlink\" title=\"运行结果\"></a>运行结果</h5><p><img src=\"http://cdn.leafii.top/img/20220520174147.png\" loading=\"lazy\"></p>\n","more":"<pre class=\"language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token comment\">&lt;!-- https://mvnrepository.com/artifact/log4j/log4j --></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>dependency</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>groupId</span><span class=\"token punctuation\">></span></span>log4j<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>groupId</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>artifactId</span><span class=\"token punctuation\">></span></span>log4j<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>artifactId</span><span class=\"token punctuation\">></span></span>\n      <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>version</span><span class=\"token punctuation\">></span></span>1.2.17<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>version</span><span class=\"token punctuation\">></span></span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>dependency</span><span class=\"token punctuation\">></span></span></code></pre>\n<h6 id=\"添加log4j-properties在resource下（也就是根目录下）\"><a href=\"#添加log4j-properties在resource下（也就是根目录下）\" class=\"headerlink\" title=\"添加log4j.properties在resource下（也就是根目录下）\"></a>添加log4j.properties在resource下（也就是根目录下）</h6><pre class=\"language-properties\" data-language=\"properties\"><code class=\"language-properties\"><span class=\"token comment\"># Global logging configuration</span>\n<span class=\"token key attr-name\">log4j.rootLogger</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">ERROR, stdout</span>\n<span class=\"token comment\"># MyBatis logging configuration...</span>\n<span class=\"token key attr-name\">log4j.logger.top.leafii.mapper.UserMapper</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">TRACE</span>\n<span class=\"token comment\">#top.leafii.mapper.UserMapper换成自己的Mapper类的相对路径</span>\n<span class=\"token comment\"># Console output...</span>\n<span class=\"token key attr-name\">log4j.appender.stdout</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">org.apache.log4j.ConsoleAppender</span>\n<span class=\"token key attr-name\">log4j.appender.stdout.layout</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">org.apache.log4j.PatternLayout</span>\n<span class=\"token key attr-name\">log4j.appender.stdout.layout.ConversionPattern</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">%5p [%t] - %m%n</span></code></pre>\n<h6 id=\"运行你的test方法，看看打印的日志\"><a href=\"#运行你的test方法，看看打印的日志\" class=\"headerlink\" title=\"运行你的test方法，看看打印的日志\"></a>运行你的test方法，看看打印的日志</h6><p><img src=\"http://cdn.leafii.top/img/20220520174103.png\"></p>\n<h6 id=\"注意事项\"><a href=\"#注意事项\" class=\"headerlink\" title=\"注意事项\"></a>注意事项</h6><p>####### 修改TRACE为debug</p>\n<p>很多时候我们只注意操作的sql语句是什么 而不是其他的东西，因此我们将log4j.properties中的</p>\n<pre class=\"language-properties\" data-language=\"properties\"><code class=\"language-properties\"><span class=\"token key attr-name\">log4j.logger.top.leafii.mapper.UserMapper</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">TRACE</span>\n<span class=\"token comment\">#修改为</span>\n<span class=\"token key attr-name\">log4j.logger.top.leafii.mapper.UserMapper</span><span class=\"token punctuation\">=</span><span class=\"token value attr-value\">debug</span></code></pre>\n\n<p><img src=\"http://cdn.leafii.top/img/20220520174125.png\"><br>现在看看是不是清爽了很多？</p>\n<h4 id=\"分析-1\"><a href=\"#分析-1\" class=\"headerlink\" title=\"分析\"></a>分析</h4><p> 每次我们写mybatis都要重新写log4j配置文件 岂不是很麻烦</p>\n<h5 id=\"修改pom-xml\"><a href=\"#修改pom-xml\" class=\"headerlink\" title=\"修改pom.xml\"></a>修改pom.xml</h5><pre class=\"language-markup\" data-language=\"markup\"><code class=\"language-markup\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resources</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resource</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>directory</span><span class=\"token punctuation\">></span></span>src/main/java<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>directory</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>includes</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span><span class=\"token punctuation\">></span></span>**/*.*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>includes</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resource</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>resource</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>directory</span><span class=\"token punctuation\">></span></span>src/main/resources<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>directory</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>includes</span><span class=\"token punctuation\">></span></span>\n                    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>include</span><span class=\"token punctuation\">></span></span>**/*.*<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>include</span><span class=\"token punctuation\">></span></span>\n                <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>includes</span><span class=\"token punctuation\">></span></span>\n            <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resource</span><span class=\"token punctuation\">></span></span>\n        <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>resources</span><span class=\"token punctuation\">></span></span></code></pre>\n<h5 id=\"运行结果\"><a href=\"#运行结果\" class=\"headerlink\" title=\"运行结果\"></a>运行结果</h5><p><img src=\"http://cdn.leafii.top/img/20220520174147.png\"></p>","categories":[],"tags":[{"name":"Mybatis","path":"api/tags/Mybatis.json"}]}